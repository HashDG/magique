<HTML>

<HEAD>
 <TITLE>Architecture</TITLE>
</HEAD>

<BODY BGCOLOR="white">
<MAP NAME="HIER">
<AREA SHAPE="CIRCLE" COORDS="194,57,12" HREF="administrator.html">
<AREA SHAPE="CIRCLE" COORDS="318,53,12" HREF="taskmanager.html">
<AREA SHAPE="CIRCLE" COORDS="412,142,12" HREF="#taskdispatcher">
<AREA SHAPE="CIRCLE" COORDS="241,259,12" HREF="platformboss.html">
<AREA SHAPE="CIRCLE" COORDS="159,259,12" HREF="platformmanager.html">
<AREA SHAPE="CIRCLE" COORDS="175,326,12" HREF="platformmanager.html">
<AREA SHAPE="CIRCLE" COORDS="241,342,12" HREF="platformmanager.html">
<AREA SHAPE="CIRCLE" COORDS="395,259,12" HREF="#repositories">
<AREA SHAPE="CIRCLE" COORDS="395,342,12" HREF="#repositories">
<AREA SHAPE="CIRCLE" COORDS="461,326,12" HREF="#repositories">
<AREA SHAPE="CIRCLE" COORDS="477,260,12" HREF="#repositories">
<AREA SHAPE="RECT" COORDS="380,23,446,62" HREF="taskfactory.html">
<AREA SHAPE="RECT" COORDS="458,24,494,61" HREF="task.html">
</MAP>

<CENTER>
<H1>La hiérarchie d'agents</H1>
<P>
<IMG SRC="images/hierarchie.gif" USEMAP="#HIER" BORDER="0">
<BR>
<B>Cliquez sur les différents agents pour obtenir une description détaillée</B>
</CENTER>

<P>
<UL>
 <LI><B>Task :</B> représente l'élément de calcul de l'application.</LI>
 <P>
 <LI><B>TaskFactory :</B></LI>
 <P>
 <LI><B>TaskManager :</B></LI>
 <P>
 <LI><B>Administrator :</B></LI>
 <P>
 <LI><B>TaskDispatcher :</B> Son rôle consiste à répartir les tâches sur les 
 différentes plateformes. 
 </LI>
 <P>
 <LI><B>PlatformBoss :</B></LI>
 <P>
 <LI><B>PlatformManager :</B></LI>
 <P>
 <LI><B>RepositoriesManager :</B> gestionnaire des dépôts de tâches. 
 Son rôle est de maintenir une base de donnée répartie fonctionnant avec un 
 système de mirroirs permettant d'enregistrer les résultats des différentes 
 tâches.
 Il créé dynamiquement les différents <code>TaskRepository</code> et les
 attribue aux différentes plateformes. Il assure ensuite la cohérence des 
 mirroirs lors des mises à jour et des consultations.
 </LI>
 <P>
 <LI><B>TaskRepository :</B> un entrepôt pour les tâches terminées.
 Son rôle consiste à fournir un moyen de stockage des tâches finies et de 
 permettre la consultation des résultats des autres tâches. 
 </LI> 
</UL>

<A NAME="taskdispatcher"><H1>TaskDispatcher</H1></A>
Le <code>TaskDispatcher</code> a pour but de distribuer les différentes tâches
déposées par le <code>TaskManager</code> sur les plateformes disponibles. 
<P>
Pour cela, il se sert d'un objet de type <code>Selector</code> qui permet de 
connaître le nom du prochain agent à utiliser. Un <code>Selector</code> peut être 
spécifique à l'application et il devra alors être fournit par le concepteur de 
l'application. Cependant, certains <code>Selector</code> de base sont fournis avec
le système. Ainsi, on trouvera le <code>RandomSelector</code> qui choisit 
aléatoirement le prochain <code>PlatformManager</code> et le 
<code>RoundSelector</code> qui sélectionne cycliquement les 
<code>PlatformManager</code>, dans l'ordre de leur déclaration. Le 
<code>Selector</code> par défaut du <code>TaskDispatcher</code> est un 
<code>RandomSelector</code>.

<A NAME="repositories"><H1>RepositoriesManager et TaskRepository</H1></A>
Les deux types d'agents étant indissociables, ils seront traités en commun
dans cette partie.
<P>
Ces agents jouent en quelque sorte le rôle de <em>mémoire du système</em>. 
Ils forment une base de donnée répartie dotée de fonctionnalités de mirroir 
pour assurer le stockage et la consultation des résultats des tâches étant 
terminées. Le mécanisme permettant d'assurer la cohérence des différents
mirroirs au cours des mises à jour et des consultations repose sur la 
hiérarchie formée par le <code>RepositoriesManager</code> et les 
<code>TaskRepository</code>. 
<P>
Lorsqu'un <code>PlatformManager</code> est créé sur une plateforme, il demande 
l'attribution d'un mirroir auprés du <code>RepositoriesManager</code>. Celui-ci
peut soit attribuer un mirroir existant, soit créé un nouveau mirroir pour
cet agent. Désormais, le <code>PlatformManager</code> ne communiquera plus 
qu'avec son mirroir. 

<UL>
<LI><B>ajout d'une nouvelle tâche:</B> lorsqu'une tâche est terminée, le 
<code>PlatformManager</code> l'envoie à son mirroir. Celui-ci la stocke et 
envoie un ordre de mise à jour au <code>RepositoriesManager</code> pour qu'il 
transmette les données aux autres mirroirs. L'opération est résumée sur le
schéma suivant:</LI>
<CENTER><IMG SRC="images/ajout.gif" BORDER="0"></CENTER> 
<LI><B>consultation:</B> lorsqu'une tâche désire obtenir le résultat d'une 
autre tâche, elle en fait la demande à son mirroir (qu'elle obtient 
<em>via</em> son <code>PlatformManager</code>). Si le mirroir posséde le 
résultat, il le fournit à la tâche. Sinon, il fait suivre la demande auprés
du <code>RepositoriesManager</code> qui interroge les autres mirroirs, et le 
cas échéant, renvoie le résultat:</LI>
<CENTER><IMG SRC="images/consultation.gif" BORDER="0"></CENTER> 
</UL>

</BODY>
</HTML>

